trigger:
- none

pool: agent1_pool

   

stages:
# =========================
# CI STAGE â€“ BUILD
# =========================
- stage: Build
  jobs:
  - job: BuildWAR
    pool:
      name: agent1_pool
    steps:
    - checkout: self

    - script: |
        echo "Current dir:"
        dir
        mvn clean package -DskipTests
      displayName: "Maven Build"

    - script: |
        echo "Maven target directory:"
        dir target
        displayName: "Check target folder"

    - script: |
        echo "Searching for WAR..."
        dir /s *.war || echo "WAR not found"
        displayName: "Find WAR"

    - task: PublishBuildArtifacts@1
      inputs:
        PathtoPublish: '$(System.DefaultWorkingDirectory)/target'
        ArtifactName: 'drop'
        publishLocation: 'Container'
